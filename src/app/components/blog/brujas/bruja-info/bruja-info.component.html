<div class="contenedor" *ngIf="brujaCargada">
    <div class="imagen">
        <img src="{{bruja.imagen}}" alt="Imagen de la bruja">
    </div>

    <div class="info">
        <h2>Biografía</h2>
        <form [formGroup]="formulario">
            <div class="datos">
                <div>
                    <label>Nombre:</label>
                    <p *ngIf="!editMode">{{bruja.nombre}}</p>
                    <input *ngIf="editMode" formControlName="editNombre" [class.invalid]="validate('editNombre','required') || validate('editNombre','minlength') || validate('editNombre','maxlength') || validate('editNombre', 'pattern')">
                    <span class="form-error" *ngIf="validate('editNombre','required')">Campo requerido</span>
                    <span class="form-error" *ngIf="validate('editNombre','minlength') && !validate('editNombre', 'pattern')">Min 3 caracteres</span>
                    <span class="form-error" *ngIf="validate('editNombre','maxlength') && !validate('editNombre', 'pattern')">Max 30 caracteres</span>
                    <span class="form-error" *ngIf="validate('editNombre', 'pattern')">Formato invalido</span>
                </div>

                <div>
                    <label>Apellido:</label>
                    <p *ngIf="!editMode">{{bruja.apellido}}</p>
                    <input *ngIf="editMode" formControlName="editApellido" [class.invalid]="validate('editApellido','required') || validate('editApellido','minlength') || validate('editApellido','maxlength') || validate('editApellido', 'pattern')">
                    <span class="form-error" *ngIf="validate('editApellido','required')">Campo requerido</span>
                    <span class="form-error" *ngIf="validate('editApellido','minlength') && !validate('editApellido', 'pattern')">Min 3 caracteres</span>
                    <span class="form-error" *ngIf="validate('editApellido','maxlength') && !validate('editApellido', 'pattern')">Max 30 caracteres</span>
                    <span class="form-error" *ngIf="validate('editApellido', 'pattern')">Formato invalido</span>
                </div>

                <div>
                    <label>Nacimiento:</label>
                    <p *ngIf="!editMode">{{bruja.fecha_nacimiento}}</p>
                    <input *ngIf="editMode" formControlName="editFechaNac" [class.invalid]="validate('editFechaNac','required') || validate('editFechaNac','maxlength') || validate('editFechaNac', 'pattern')">
                    <span class="form-error" *ngIf="validate('editFechaNac','required')">Campo requerido</span>
                    <span class="form-error" *ngIf="validate('editFechaNac','maxlength') && !validate('editFechaNac', 'pattern')">Max 10 caracteres</span>
                    <span class="form-error" *ngIf="validate('editFechaNac', 'pattern')">Formato invalido</span>
                </div>

                <div>
                    <label>Defunción:</label>
                    <p *ngIf="!editMode">{{bruja.fecha_defuncion}}</p>
                    <input *ngIf="editMode" formControlName="editFechaDef" [class.invalid]="validate('editFechaDef','required') || validate('editFechaDef','maxlength') || validate('editFechaDef', 'pattern')">
                    <span class="form-error" *ngIf="validate('editFechaDef','required')">Campo requerido</span>
                    <span class="form-error" *ngIf="validate('editFechaDef','maxlength') && !validate('editFechaDef', 'pattern')">Max 10 caracteres</span>
                    <span class="form-error" *ngIf="validate('editFechaDef', 'pattern')">Formato invalido</span>
                </div>

                <div>
                    <label>Lugar de Nacimiento:</label>
                    <p *ngIf="!editMode">{{bruja.lugar_de_nacimiento}}</p>
                    <input *ngIf="editMode" formControlName="editLugarNac" [class.invalid]="validate('editLugarNac','required') || validate('editLugarNac','minlength') || validate('editLugarNac','maxlength') || validate('editLugarNac', 'pattern')">
                    <span class="form-error" *ngIf="validate('editLugarNac','required')">Campo requerido</span>
                    <span class="form-error" *ngIf="validate('editLugarNac','minlength') && !validate('editLugarNac', 'pattern')">Min 3 caracteres</span>
                    <span class="form-error" *ngIf="validate('editLugarNac','maxlength') && !validate('editLugarNac', 'pattern')">Max 30 caracteres</span>
                    <span class="form-error" *ngIf="validate('editLugarNac', 'pattern')">Formato invalido</span>
                
                </div>

                <div>
                    <label>Lugar de Ejecución:</label>
                    <p *ngIf="!editMode">{{bruja.lugar_de_ejecucion}}</p>
                    <input *ngIf="editMode" formControlName="editLugarEjec" [class.invalid]="validate('editLugarEjec','required') || validate('editLugarEjec','minlength') || validate('editLugarEjec','maxlength') || validate('editLugarEjec', 'pattern')">
                    <span class="form-error" *ngIf="validate('editLugarEjec','required')">Campo requerido</span>
                    <span class="form-error" *ngIf="validate('editLugarEjec','minlength') && !validate('editLugarEjec', 'pattern')">Min 3 caracteres</span>
                    <span class="form-error" *ngIf="validate('editLugarEjec','maxlength') && !validate('editLugarEjec', 'pattern')">Max 30 caracteres</span>
                    <span class="form-error" *ngIf="validate('editLugarEjec', 'pattern')">Formato invalido</span>
                </div>

                <div>
                    <label>Tipo de Muerte:</label>
                    <p *ngIf="!editMode">{{bruja.tipo_de_muerte}}</p>
                    <input *ngIf="editMode" formControlName="editTipoMuerte" [class.invalid]="validate('editTipoMuerte','required') || validate('editTipoMuerte','minlength') || validate('editTipoMuerte','maxlength') || validate('editTipoMuerte', 'pattern')">
                    <span class="form-error" *ngIf="validate('editTipoMuerte','required')">Campo requerido</span>
                    <span class="form-error" *ngIf="validate('editTipoMuerte','minlength') && !validate('editTipoMuerte', 'pattern')">Min 3 caracteres</span>
                    <span class="form-error" *ngIf="validate('editTipoMuerte','maxlength') && !validate('editTipoMuerte', 'pattern')">Max 30 caracteres</span>
                    <span class="form-error" *ngIf="validate('editTipoMuerte', 'pattern')">Formato invalido</span>
                </div>
            </div>
    
            <div class="datos">
                <div>
                    <label>Historia:</label>
                </div>
                
                <div class="historia-bruja">
                    <p *ngIf="!editMode">{{bruja.historia}}</p>
                    <textarea *ngIf="editMode" formControlName="editHistoria" [class.invalid]="validate('editHistoria','minlength') || validate('editHistoria','maxlength')">{{bruja.historia}}</textarea>
                    <span class="form-error" *ngIf="validate('editHistoria','minlength')">Min 10 caracteres</span>
                    <span class="form-error" *ngIf="validate('editHistoria','maxlength')">Max 500 caracteres</span>
                </div>
            </div>

        </form>

        <div class="container-buttons">
            <button class="boton-claro" type="button" *ngIf="!editMode && isAdminRole"
                (click)="activarEditMode()">Editar</button>

            <button class="boton-claro" *ngIf="editMode && isAdminRole" (click)="cancelarCambios()">Cancelar</button>
            <button class="boton-claro" *ngIf="editMode && isAdminRole" (click)="actualizarBruja()">Guardar</button>

        </div>
    </div>
</div>


